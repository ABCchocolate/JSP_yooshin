<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Product">

	<!-- insert -->
	<insert id="insert" parameterType="Product">
		insert into product(product_name, brand, price, discount, interviews,
		detail, subcategory_id)
		values (#{product_name}, #{brand}, #{price}, #{discount}, #{interviews},
		#{detail}, #{subcategory.subcategory_id})

		<!-- insert 시키자마자 현재 session에서 일으킨 pk 의 최대 -->
		<selectKey keyColumn="product_id" keyProperty="product_id"
			resultType="int" order="AFTER">
			select last_insert_id() as product_id
		</selectKey>
	</insert>

	<insert id="insertProductColor" parameterType="ProductColor">
    insert into product_color(product_id, color_id)
    values (#{product_id}, #{color_id})
</insert>
	
</mapper>