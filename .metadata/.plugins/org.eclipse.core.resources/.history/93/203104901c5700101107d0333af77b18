<%@ page contentType="text/html; charset=utf-8" %>
<%
	int totalRecord = 926;
	int pageSize = 10;
	int currentPage = 1;

	String paramPage = request.getParameter("currentPage");
	if (paramPage != null) {
		currentPage = Integer.parseInt(paramPage);
	}

	int totalpage = (int)Math.ceil((float)totalRecord / pageSize);
	int blockSize = 10;
	int firstPage = 10*(currentPage/blockSize) + 1; //블럭당 시작페이지
	int lastPage = 10*(paramPage/blcokSize) + 10; //블럭당 마지막페이
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
table {
  border-collapse: collapse;
  width: 100%;
  border: 1px solid #ddd;
}
th, td {
  text-align: left;
  padding: 16px;
}
tr:nth-child(even) {
  background-color: #f2f2f2;
}
</style>
</head>
<body>

<h2>총 레코드 수: <%= totalRecord %></h2>
<h2>총 페이지 수: <%= totalpage %></h2>
<h2>총 블록 크기: <%= blockSize %></h2>
<h2>현재 페이지: <%= currentPage %></h2>

<table>
  <tr>
    <th>No</th>
    <th>Last Name</th>
    <th>Points</th>
  </tr>
  <% for(int i = 0; i < pageSize; i++) { 
       int recordNo = (currentPage - 1) * pageSize + i + 1;
       if (recordNo > totalRecord) break;
  %>
  <tr>
    <td><%= recordNo %></td>
    <td>Smith</td>
    <td>50</td>
  </tr>
  <% } %>

  <tr>
  	<td colspan="3" align="center">
 	  <a href="?currentPage=<%= (currentPage > 1 ? currentPage - 1 : 1) %>">⬅</a>
  	  <% 
  		int startPage = ((currentPage - 1) / blockSize) * blockSize + 1;
  		int endPage = startPage + blockSize - 1;
  		if (endPage > totalpage) endPage = totalpage;
  		for (int i = startPage; i <= endPage; i++) {
  	  %>
  	    <a href="?currentPage=<%= i %>">[<%= i %>]</a>
  	  <% } %>
  	  <a href="?currentPage=<%= (currentPage < totalpage ? currentPage + 1 : totalpage) %>">➤</a>
  	</td>
  </tr>
</table>

</body>
</html>
